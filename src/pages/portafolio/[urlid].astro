---
import { fade } from "astro:transitions";

import { miURL } from "../../utils";
import { Image } from "astro:assets";
import TechIcons from "@/components/TechIcons";

import Layout from "../../layouts/Layout.astro";
export const getStaticPaths = async () => {
  const respuesta = await fetch(miURL);
  const { projects } = await respuesta.json();
  return projects.map((proyecto: Proyecto) => ({
    params: {
      urlid: proyecto.url,
    },
    props: {
      proyecto: proyecto,
    },
  }));
};

export interface Props {
  proyecto: Proyecto;
}

export type ViewPage = {
  netlify: string;
  github: string;
  youtube: string;
};

export interface Proyecto {
  name: string;
  image: string;
  description: string;
  techs: Array<string>;
  url: string;
  viewPage: ViewPage[];
}

export interface Params {
  urlid: string;
}

const { proyecto } = Astro.props;

const { name, image, description, techs, url, viewPage } = proyecto;
---

<Layout
  title={`Proyecto ${name}`}
  description={`Post ${name}, descripcion de portafolio, detalle de portafolio`}
>
  <article
    transition:animate={fade({ duration: "0.5s" })}
    class="bg-gradient-to-b from-gray-300 to-zinc-400 min-h-full"
  >
    <h1
      class="text-3xl py-6 lg:text-6xl font-mono font-bold uppercase text-center"
    >
      {name}
    </h1>
    <Image
      class="w-full shadow-lg"
      src={image}
      alt={`Imagen ${name}`}
      width={100}
      height={100}
    />

    <div class="p-4 lg:w-2/3 mx-auto mt-6">
      <h2 class="text-2xl md:text-4xl font-medium my-3">
        Descripcion del proyecto
      </h2>
      <p class="mx-auto my-5 text-base md:text-lg">
        {description}
      </p>

      <hr
        class="bg-gradient-to-r from-blue-600 to-emerald-400 border-transparent w-full h-1 my-5 mx-auto"
      />
      <h2 class="text-2xl md:text-4xl font-medium my-3">Tecnologías Usadas</h2>
      <ul
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 justify-center my-2"
      >
        {
          techs.map((tecnologia) => (
            <TechIcons client:only="react" tecnologia={tecnologia} />
          ))
        }
      </ul>

      <hr
        class="bg-gradient-to-r from-blue-600 to-emerald-400 border-transparent w-full h-1 my-5 mx-auto"
      />

      <h2 class="text-2xl md:text-4xl font-medium my-4">Demos y Código</h2>

      <ul class="flex gap-3 flex-col md:flex-row w-full justify-between my-4">
        {
          viewPage.map((page) => (
            <>
              <li class={`${page.github === "" ? "hidden" : "block"}`}>
                <a href={`${page.github}`} target="_blank">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-8 w-8 md:h-16 md:w-16 duration-300 transition-colors-opacity hover:fill-gray-900"
                    viewBox="0 0 24 24"
                  >
                    <path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2" />
                  </svg>
                </a>
              </li>

              <li class={`${page.netlify === "" ? "hidden" : "block"}`}>
                <a href={`${page.netlify}`} target="_blank">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-8 w-8 md:h-16 md:w-16 fill-cyan-500 duration-300 transition-colors-opacity hover:fill-cyan-700"
                    viewBox="0 0 512 512"
                  >
                    <path d="m369.92 176.64l10.24-64l48.64 48.64l-50.892 22.221zm71.68-2.56l51.2 51.2c8.897 9.355 18.922 16.505 19.2 25.6l-126.636-53.814zm67.84 93.44c-21.054 26.636-48.02 50.58-74.24 76.8l-78.053-16.14c0-6.4-4.06-12.136-9.18-15.976l14.273-89.484c7.19.505 15.044-5.542 16.87-11.163zm-88.32 90.88l-96 96l16.64-101.12c4.954-1.686 8.75-4.725 11.52-8.96zM304.64 474.88l-10.24 10.24l-120.32-172.8c1.979-1.59 3.086-3.326 3.84-5.12l133.12 28.16c1.117 6.85 9.24 14.478 14.329 16.64zm-21.76 21.76l-16.64 14.08H243.2c-42.508-42.957-138.24-138.24-138.24-138.24l32.248-49.087c8.487 3.215 18.39 2.608 25.178-1.355zM66.56 334.08l53.76-24.32l3.84 5.12l-33.173 43.333zm-12.8-12.8L6.4 272.64l109.73 22.717zM0 254.72c1.798-13.476 12.956-22.458 19.2-29.44l44.8-44.8l62.72 90.88l-6.544 7.903zm75.52-85.76l60.16-60.16l76.8 33.28c-3.215 11.723.164 21.943 6.4 26.88l-62.447 94.795c-6.313-2.155-10.525-1.156-14.634-.004zm72.96-71.68s90.88-93.44 97.28-96h17.92l39.68 34.56l-55.994 87.149c-9-1.948-20.289-1.296-26.578 4.71zm166.4-49.92l51.2 51.2l-11.8 77.926c-2.808.536-6.63 2.061-8.843 4.483l-80.477-34.357c1.257-5.545.004-11.648-3.84-14.772zm21.76 146.524l-.048 7.848L172.8 271.36l-1.28-1.28l62.293-94.805c12.238 1.132 22.734-4.706 27.648-13.193zM179.2 285.44l163.84-70.4l3.9 3.84l-14.228 88.307c-8.22.982-16.261 6.045-19.876 13.008L181.76 291.84z" />
                  </svg>
                </a>
              </li>
              <li class={`${page.youtube === "" ? "hidden" : "block"}`}>
                <a href={`${page.youtube}`} target="_blank">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-8 w-8 md:h-16 md:w-16 fill-red-600 duration-300 transition-colors-opacity hover:fill-red-800"
                    viewBox="0 0 24 24"
                  >
                    <path d="M2.5 4.5h19c.84 0 1.5.65 1.5 1.5v11.5c0 .85-.66 1.5-1.5 1.5h-19c-.85 0-1.5-.65-1.5-1.5V6c0-.85.65-1.5 1.5-1.5m7.21 4V15l5.71-3.3zM17.25 21H6.65c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h10.7c.3 0 .5.2.5.5s-.3.5-.6.5" />
                  </svg>
                </a>
              </li>
            </>
          ))
        }
      </ul>
    </div>

    <div class="flex justify-center py-6 w-full">
      <a
        class="bg-sky-500 hover:bg-sky-600 duration-300 ease-in-out transition-colors text-white p-5 uppercase font-semibold block mx-4 md:mx-0 w-full sm:w-2/5 lg:w-1/3 text-center text-base sm:text-lg xl:text-xl"
        href="/">Volver a Inicio</a
      >
    </div>
  </article>
</Layout>
